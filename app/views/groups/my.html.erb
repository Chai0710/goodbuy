  <div id="wrapper"  >
    <%= render 'shared/sidebar' %>

    <!-- Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column mb-5">

      <!-- Main Content -->
      <div id="content">

        <!-- Topbar -->

        <!-- End of Topbar -->

        <!-- Begin Page Content -->
        <div class="container-fluid mt-5">
          <!-- Page Heading -->
          <h1 class="h3 text-heading"> <%= t("groups.my_group") %> </h1>

          <!-- DataTales Example -->
          <div class="mac card-group">
              <div class="row">
                <% if @groups.count == 0 %>
                  <div class="newuser_guide card text-center mx-auto p-3">
                    <div class="ml-1 row p-2 justify-content-center">
                    <p>
                    <%= t("groups.still_no_group") %>
                    </p>
                    <p>
                    <%= t("groups.can_click_public") %>
                    </p>
                      <div class="col-4">
                        <%= link_to t("groups.new_group"), new_group_path, class: "btn btn-success" %>
                      </div>
                    </div>
                  </div>
                <% end %>
                <% @groups.each do |group| %>
                <div class="card">
                  <div class="row p-2">
                    <div class="card-img-left col-4">
                      <% if group.shop_photo.attached? %>
                        <%= image_tag group.shop_photo, class: "default-pic" %>
                      <% else %>
                          <%= image_tag("logo.png", :alt => "logo", class:"default-pic") %>
                      <% end %>
                    </div>
                  
                  
                    <div class="col-8 text-dark">
                      <div class="pc-card-title">
                        <h2 class="card-title mt-2"><% if group.is_active == true %>
                              <%= link_to group.title, link_group_path(group.id), class: "text-primary", :remote => true %>
                            <% else%>
                              <%= group.title %>
                            <% end %>
                        </h2>
                        <div class="status ml-2">
                          <%= link_to t("groups.follow_group_icon"), follow_group_path(group.id), class: "btn btn-sm btn-warning", method: 'patch', remote: true %>
                        </div>
                      </div>
                      <p><%= group.description %></p>
                      
                      <div class="d-flex justify-content-start">
                        
                        <div class="status mr-1">
                          <%= link_to t("groups.see_status"), group_path(group.id), class: "btn btn-sm btn-status" %>
                        </div>
                        <div class="status mr-1">
                          <% if group.is_active == true %>
                            <%= link_to t("groups.close_group"), close_group_path(group.id), class: "btn btn-sm btn-close", method: "put", data: {confirm: t("groups.confirm_close")} %>
                          <% else%>
                            <%= link_to t("groups.create_again"),new_group_path(:group_id => group.id), class: "btn btn-sm btn-reopen"%>
                          <% end %>
                        </div>
                        <div class="status mr-1">
                          <%= link_to t("groups.edit"), edit_group_path(group.id), class: "btn btn-sm btn-reopen" if group.is_active %>
                        </div>

                      </div>
                      <hr>
                      <div class="time my-2">
                        <span class="mr-3">
                          <%= t("groups.start_time") %>：<%= group.created_at.to_s(:common) %>
                        </span>
                        <span>
                          <%= t("groups.end_time") %>：<% unless group.is_active %>
                            <%= group.end_time.to_s(:common) if group.end_time %>
                          <% end %>
                        </span>
                      </div>
                    </div>
                  </div>
                   </div>
                <% end %>
             
            </div>
          </div>


          <div class="phone-card">
            <% if @groups.count == 0 %>
              <div class="newuser_guide card text-center mx-auto">
                <div class="row p-2 justify-content-center p-3">
                <p>
                <%= t("groups.still_no_group") %>
                </p>
                <p>
                <%= t("groups.can_click_public") %>
                </p>
                  <div class="col-4">
                    <%= link_to t("groups.new_group"), new_group_path, class: "btn btn-success" %>
                  </div>
                </div>
              </div>
            <% end %>
            <% @groups.each do |group| %>
              <div class="card mt-3">
                <div class="card-body">
                  <div class="card-img-top">
                    <% if group.shop_photo.attached? %>
                      <%= image_tag group.shop_photo, class: "default-pic" %>
                    <% else %>
                        <%= image_tag("logo.png", :alt => "logo", class:"default-pic") %>
                    <% end %>
                  </div>
                  <h3 class="card-title"> <%= group.title %> </h3>
                  <h6 class="card-subtitle mb-2 text-muted"> <%= group.description %> </h6>
                  <p class="card-text"><%= t("groups.start_time") %> <%= group.created_at.to_s(:common) %> </p>
                  <% if group.is_active == true %>
                    <%= link_to t("groups.close_group"), close_group_path(group.id), class: "btn btn-close", method: "put", data: {confirm: t("groups.confirm_close")} %>
                  <% else%>
                    <%= link_to t("groups.create_again"),new_group_path(:group_id => group.id), class: "btn btn-reopen" %>
                  <% end %>
                  <% if group.is_active == true %>
                    <%= link_to t("groups.link"), link_group_path(group.id), class: "btn btn-secondary" %>
                  <% end %>
                  <%= link_to t("groups.see_status"), group_path(group.id), class: "btn btn-status" %>
                </div>
              </div>
            <% end %>
          </div>

          <div class="modal" tabindex="-1" role="dialog" id="qrcode-modal">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title"><%= t("groups.your_link") %></h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <div id="event_area"></div>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-dark" data-dismiss="modal">關閉</button> 
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- /.container-fluid -->

      </div>
      <!-- End of Main Content -->

      <!-- Footer -->
      <%= render "footer" %>
      <!-- End of Footer -->

    </div>
    <!-- End of Content Wrapper -->


  </div>




